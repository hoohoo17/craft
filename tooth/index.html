<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ¦· ì´ë¹¨í¬ë˜í”„íŠ¸</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .game-container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      padding: 30px;
      width: 400px;
      text-align: center;
    }
    
    .header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      font-size: 18px;
      font-weight: bold;
      color: #333;
    }
    
    h1 {
      font-size: 28px;
      margin-bottom: 20px;
      color: #0097a7;
    }
    
    .teeth-container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin: 20px 0;
      padding: 20px;
      background: #fafafa;
      border-radius: 15px;
    }
    
    .tooth {
      font-size: 36px;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }
    
    .tooth:hover { transform: scale(1.1); }
    
    .tooth.healthy { background: #e8f5e9; }
    .tooth.dirty { background: #fff9c4; }
    .tooth.danger { background: #ffccbc; }
    .tooth.cavity { background: #d7ccc8; }
    
    .tooth-info {
      font-size: 10px;
      color: #666;
      margin-top: 5px;
    }
    
    .plaque-bar {
      height: 4px;
      background: #eee;
      border-radius: 2px;
      margin-top: 5px;
      overflow: hidden;
    }
    
    .plaque-bar-fill {
      height: 100%;
      background: #ffc107;
      transition: width 0.3s;
    }
    
    .buttons {
      display: flex;
      gap: 10px;
      margin: 20px 0;
    }
    
    button {
      flex: 1;
      padding: 15px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
      font-weight: bold;
    }
    
    button:hover { transform: translateY(-2px); }
    button:active { transform: translateY(0); }
    
    .btn-brush {
      background: linear-gradient(135deg, #4fc3f7, #29b6f6);
      color: white;
    }
    
    .btn-hospital {
      background: linear-gradient(135deg, #f48fb1, #ec407a);
      color: white;
    }
    
    .btn-next {
      background: linear-gradient(135deg, #81c784, #66bb6a);
      color: white;
      width: 100%;
    }
    
    .message {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 10px;
      margin: 15px 0;
      font-size: 14px;
      color: #555;
      min-height: 50px;
    }
    
    .tooltip {
      position: fixed;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 14px;
      pointer-events: none;
      z-index: 100;
      display: none;
    }
    
    .game-over {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 200;
    }
    
    .game-over-box {
      background: white;
      padding: 40px;
      border-radius: 20px;
      text-align: center;
    }
    
    .game-over h2 { color: #e53935; margin-bottom: 20px; }
    
    .restart-btn {
      background: #4caf50;
      color: white;
      padding: 15px 30px;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      cursor: pointer;
    }

    .brushing-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(255,255,255,0.95);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 150;
    }
    
    .brushing-teeth {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      margin: 30px 0;
    }
    
    .brushing-tooth {
      font-size: 48px;
      padding: 15px;
      border-radius: 15px;
      cursor: pointer;
      background: #ffecb3;
      transition: all 0.2s;
    }
    
    .brushing-tooth.brushed {
      background: #c8e6c9;
      animation: sparkle 0.5s;
    }
    
    .brushing-tooth:hover { transform: scale(1.1); }
    
    @keyframes sparkle {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }
    
    .timer {
      font-size: 48px;
      font-weight: bold;
      color: #0097a7;
    }
    
    .brushing-progress {
      font-size: 20px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <h1>ğŸ¦· ì´ë¹¨í¬ë˜í”„íŠ¸</h1>
    
    <div class="header">
      <span>ğŸ’° <span id="money">1000</span>ì›</span>
      <span>ğŸ“… Day <span id="day">1</span></span>
    </div>
    
    <div class="teeth-container" id="teeth"></div>
    
    <div class="message" id="message">
      ì•ˆë…•í•˜ì„¸ìš”! ì¹˜ì•„ë¥¼ ê±´ê°•í•˜ê²Œ ê´€ë¦¬í•´ë³´ì„¸ìš”. ğŸª¥
    </div>
    
    <div class="buttons">
      <button class="btn-brush" onclick="startBrushing()">ğŸª¥ ì–‘ì¹˜í•˜ê¸°</button>
      <button class="btn-hospital" onclick="visitHospital()">ğŸ¥ ì¹˜ê³¼ê°€ê¸°</button>
    </div>
    
    <button class="btn-next" onclick="nextDay()">â© ë‹¤ìŒ ë‚ </button>
  </div>
  
  <div class="tooltip" id="tooltip"></div>

  <script>
    // ê²Œì„ ìƒíƒœ
    const game = {
      day: 1,
      money: 1000,
      brushedToday: false
    };
    
    // ì¹˜ì•„ 8ê°œ ì´ˆê¸°í™”
    const teeth = Array.from({ length: 8 }, (_, i) => ({
      id: i,
      name: i < 4 ? `ì•ë‹ˆ ${i + 1}` : `ì–´ê¸ˆë‹ˆ ${i - 3}`,
      hp: 100,
      plaque: 0,
      hasCavity: false
    }));
    
    // ì¹˜ì•„ ë Œë”ë§
    function renderTeeth() {
      const container = document.getElementById('teeth');
      container.innerHTML = teeth.map(tooth => {
        let stateClass = 'healthy';
        let emoji = 'ğŸ¦·';
        
        if (tooth.hasCavity) {
          stateClass = 'cavity';
          emoji = 'ğŸ¦´';
        } else if (tooth.plaque >= 80) {
          stateClass = 'danger';
        } else if (tooth.plaque >= 40) {
          stateClass = 'dirty';
        }
        
        return `
          <div class="tooth ${stateClass}" 
               onmouseenter="showTooltip(event, ${tooth.id})" 
               onmouseleave="hideTooltip()">
            ${emoji}
            <div class="plaque-bar">
              <div class="plaque-bar-fill" style="width: ${tooth.plaque}%"></div>
            </div>
          </div>
        `;
      }).join('');
    }
    
    // íˆ´íŒ í‘œì‹œ
    function showTooltip(event, id) {
      const tooth = teeth[id];
      const tooltip = document.getElementById('tooltip');
      tooltip.innerHTML = `
        <strong>${tooth.name}</strong><br>
        â¤ï¸ HP: ${tooth.hp}<br>
        ğŸ¦  í”Œë¼í¬: ${tooth.plaque}%<br>
        ${tooth.hasCavity ? 'âš ï¸ ì¶©ì¹˜ ìˆìŒ!' : 'âœ… ê±´ê°•í•¨'}
      `;
      tooltip.style.display = 'block';
      tooltip.style.left = event.pageX + 10 + 'px';
      tooltip.style.top = event.pageY + 10 + 'px';
    }
    
    function hideTooltip() {
      document.getElementById('tooltip').style.display = 'none';
    }
    
    // ì–‘ì¹˜ ë¯¸ë‹ˆê²Œì„ ì‹œì‘
    function startBrushing() {
      if (game.brushedToday) {
        showMessage('ì˜¤ëŠ˜ì€ ì´ë¯¸ ì–‘ì¹˜í–ˆì–´ìš”! ë‚´ì¼ ë˜ ë‹¦ì•„ìš”~ ğŸ˜Š');
        return;
      }
      
      const overlay = document.createElement('div');
      overlay.className = 'brushing-overlay';
      overlay.id = 'brushing-overlay';
      
      const brushedTeeth = new Set();
      
      overlay.innerHTML = `
        <h2>ğŸª¥ ì–‘ì¹˜ íƒ€ì„!</h2>
        <p>ëª¨ë“  ì¹˜ì•„ë¥¼ í´ë¦­í•´ì„œ ë‹¦ìœ¼ì„¸ìš”!</p>
        <div class="timer" id="brush-timer">10</div>
        <div class="brushing-teeth" id="brushing-teeth">
          ${teeth.map((t, i) => `
            <div class="brushing-tooth" data-id="${i}">
              ${t.hasCavity ? 'ğŸ¦´' : 'ğŸ¦·'}
            </div>
          `).join('')}
        </div>
        <div class="brushing-progress">
          ë‹¦ì€ ì¹˜ì•„: <span id="brushed-count">0</span> / 8
        </div>
      `;
      
      document.body.appendChild(overlay);
      
      // ì¹˜ì•„ í´ë¦­ ì´ë²¤íŠ¸
      overlay.querySelectorAll('.brushing-tooth').forEach(el => {
        el.onclick = () => {
          const id = parseInt(el.dataset.id);
          if (!brushedTeeth.has(id)) {
            brushedTeeth.add(id);
            el.classList.add('brushed');
            document.getElementById('brushed-count').textContent = brushedTeeth.size;
          }
        };
      });
      
      // íƒ€ì´ë¨¸
      let timeLeft = 10;
      const timer = setInterval(() => {
        timeLeft--;
        document.getElementById('brush-timer').textContent = timeLeft;
        
        if (timeLeft <= 0) {
          clearInterval(timer);
          finishBrushing(brushedTeeth);
        }
      }, 1000);
    }
    
    // ì–‘ì¹˜ ì™„ë£Œ
    function finishBrushing(brushedTeeth) {
      document.getElementById('brushing-overlay').remove();
      game.brushedToday = true;
      
      // ë‹¦ì€ ì¹˜ì•„ë§Œ í”Œë¼í¬ ê°ì†Œ
      teeth.forEach((tooth, i) => {
        if (!tooth.hasCavity && brushedTeeth.has(i)) {
          tooth.plaque = Math.max(0, tooth.plaque - 50);
        }
      });
      
      const brushedCount = brushedTeeth.size;
      const skippedTeeth = teeth.filter((t, i) => !brushedTeeth.has(i) && !t.hasCavity);
      
      if (brushedCount === 8) {
        showMessage('ì™„ë²½í•œ ì–‘ì¹˜! ëª¨ë“  ì¹˜ì•„ê°€ ë°˜ì§ë°˜ì§! âœ¨');
      } else if (brushedCount >= 5) {
        showMessage(`${brushedCount}ê°œ ë‹¦ìŒ! ì•ˆ ë‹¦ì€ ${8 - brushedCount}ê°œëŠ” í”Œë¼í¬ ê·¸ëŒ€ë¡œ... ğŸ˜…`);
      } else {
        showMessage(`${brushedCount}ê°œë§Œ ë‹¦ì•˜ì–´ìš”! ì•ˆ ë‹¦ì€ ì¹˜ì•„ ì¡°ì‹¬! âš ï¸`);
      }
      
      renderTeeth();
    }
    
    // ì¹˜ê³¼ ë°©ë¬¸
    function visitHospital() {
      const cavityTeeth = teeth.filter(t => t.hasCavity);
      
      if (cavityTeeth.length === 0) {
        showMessage('ì¶©ì¹˜ê°€ ì—†ì–´ìš”! ê±´ê°•í•œ ì¹˜ì•„ì…ë‹ˆë‹¤! ğŸ‘');
        return;
      }
      
      const cost = cavityTeeth.length * 500;
      
      if (game.money < cost) {
        showMessage(`ëˆì´ ë¶€ì¡±í•´ìš”! ${cost}ì› í•„ìš” (ë³´ìœ : ${game.money}ì›) ğŸ˜¢`);
        return;
      }
      
      game.money -= cost;
      cavityTeeth.forEach(tooth => {
        tooth.hasCavity = false;
        tooth.hp = 100;
        tooth.plaque = 0;
      });
      
      showMessage(`${cavityTeeth.length}ê°œ ì¹˜ì•„ ì¹˜ë£Œ ì™„ë£Œ! -${cost}ì› ğŸ’‰`);
      updateUI();
    }
    
    // ë‹¤ìŒ ë‚ 
    function nextDay() {
      game.day++;
      game.brushedToday = false;
      
      // ë§¤ì¼ í”Œë¼í¬ ì¦ê°€
      teeth.forEach(tooth => {
        if (!tooth.hasCavity) {
          tooth.plaque += 20;
          
          // í”Œë¼í¬ 100% ì´ìƒì´ë©´ ì¦‰ì‹œ ì¶©ì¹˜!
          if (tooth.plaque >= 100) {
            tooth.hasCavity = true;
            tooth.hp = 0;
            tooth.plaque = 100;
          }
        }
      });
      
      // ìš©ëˆ ì§€ê¸‰
      game.money += 100;
      
      // ê²Œì„ ì˜¤ë²„ ì²´í¬
      const allCavity = teeth.every(t => t.hasCavity);
      if (allCavity) {
        showGameOver();
        return;
      }
      
      // ìƒíƒœ ë©”ì‹œì§€
      const cavityCount = teeth.filter(t => t.hasCavity).length;
      const dangerCount = teeth.filter(t => !t.hasCavity && t.plaque >= 80).length;
      
      if (cavityCount > 0) {
        showMessage(`âš ï¸ ì¶©ì¹˜ ${cavityCount}ê°œ! ì¹˜ê³¼ ê°€ì„¸ìš”! (+100ì› ìš©ëˆ)`);
      } else if (dangerCount > 0) {
        showMessage(`ğŸ˜° ${dangerCount}ê°œ ì¹˜ì•„ ìœ„í—˜! ì–‘ì¹˜í•˜ì„¸ìš”! (+100ì› ìš©ëˆ)`);
      } else {
        showMessage(`ì¢‹ì€ ì•„ì¹¨! Day ${game.day} ğŸŒ… (+100ì› ìš©ëˆ)`);
      }
      
      updateUI();
    }
    
    // UI ì—…ë°ì´íŠ¸
    function updateUI() {
      document.getElementById('money').textContent = game.money;
      document.getElementById('day').textContent = game.day;
      renderTeeth();
    }
    
    // ë©”ì‹œì§€ í‘œì‹œ
    function showMessage(text) {
      document.getElementById('message').textContent = text;
    }
    
    // ê²Œì„ ì˜¤ë²„
    function showGameOver() {
      const overlay = document.createElement('div');
      overlay.className = 'game-over';
      overlay.innerHTML = `
        <div class="game-over-box">
          <h2>ğŸ˜± ê²Œì„ ì˜¤ë²„!</h2>
          <p>ëª¨ë“  ì¹˜ì•„ê°€ ì¶©ì¹˜ê°€ ë˜ì—ˆì–´ìš”...</p>
          <p>ì´ ${game.day}ì¼ ë²„í…¼ìŠµë‹ˆë‹¤!</p>
          <br>
          <button class="restart-btn" onclick="location.reload()">
            ğŸ”„ ë‹¤ì‹œ ì‹œì‘
          </button>
        </div>
      `;
      document.body.appendChild(overlay);
    }
    
    // ê²Œì„ ì‹œì‘
    renderTeeth();
  </script>
</body>
</html>
